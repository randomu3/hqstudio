<UserControl x:Class="HQStudio.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel>
            
            <!-- Hero Section -->
            <Border Style="{DynamicResource Card}" Padding="40" Margin="0,0,0,24">
                <Border.Effect>
                    <DropShadowEffect Color="White" BlurRadius="30" ShadowDepth="0" Opacity="0.05"/>
                </Border.Effect>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock Text="–ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–û–ï" Style="{DynamicResource TextLabel}" Margin="0,0,0,10"/>
                        <TextBlock FontSize="44" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5">
                            <TextBlock.Effect>
                                <DropShadowEffect Color="White" BlurRadius="25" ShadowDepth="0" Opacity="0.35"/>
                            </TextBlock.Effect>
                            –î–û–û–°–ù–ê–©–ï–ù–ò–ï
                        </TextBlock>
                        <TextBlock Text="–í–ê–®–ï–ì–û –ê–í–¢–û–ú–û–ë–ò–õ–Ø" FontSize="44" FontWeight="Light" Foreground="#606060"/>
                        <TextBlock Text="–°—É—Ä–≥—É—Ç ‚Ä¢ HQ Studio ‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–æ –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤" 
                                   Style="{DynamicResource TextSmall}" Margin="0,24,0,0"/>
                    </StackPanel>
                    
                    <Border Grid.Column="1" Width="140" Height="140" CornerRadius="70" 
                            Background="{DynamicResource BgAvatarBrush}" VerticalAlignment="Center">
                        <Border.Effect>
                            <DropShadowEffect Color="White" BlurRadius="40" ShadowDepth="0" Opacity="0.2"/>
                        </Border.Effect>
                        <TextBlock Text="HQ" FontSize="52" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                   FontFamily="Segoe UI Black"/>
                    </Border>
                </Grid>
            </Border>

            <!-- Stats Cards -->
            <Grid Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Style="{DynamicResource CardHoverable}" Margin="0,0,12,0">
                    <StackPanel>
                        <Border Width="48" Height="48" CornerRadius="12" Background="{DynamicResource BgIconBrush}" 
                                HorizontalAlignment="Left" Margin="0,0,0,16">
                            <TextBlock Text="üë•" FontSize="22" Foreground="{DynamicResource TextPrimaryBrush}"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="{Binding TotalClients}" FontSize="36" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="–ö–ª–∏–µ–Ω—Ç–æ–≤" Style="{DynamicResource TextSmall}" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="1" Style="{DynamicResource CardHoverable}" Margin="6,0">
                    <StackPanel>
                        <Border Width="48" Height="48" CornerRadius="12" Background="{DynamicResource BgIconBrush}" 
                                HorizontalAlignment="Left" Margin="0,0,0,16">
                            <TextBlock Text="üìã" FontSize="22" Foreground="{DynamicResource TextPrimaryBrush}"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="{Binding TotalOrders}" FontSize="36" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤" Style="{DynamicResource TextSmall}" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="2" Style="{DynamicResource CardHoverable}" Margin="6,0">
                    <StackPanel>
                        <Border Width="48" Height="48" CornerRadius="12" Background="{DynamicResource BgIconYellowBrush}" 
                                HorizontalAlignment="Left" Margin="0,0,0,16">
                            <TextBlock Text="‚ö°" FontSize="22" Foreground="#FFC107"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="{Binding ActiveOrders}" FontSize="36" FontWeight="Bold" Foreground="#FFC107"/>
                        <TextBlock Text="–í —Ä–∞–±–æ—Ç–µ" Style="{DynamicResource TextSmall}" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="3" Style="{DynamicResource CardHoverable}" Margin="12,0,0,0">
                    <StackPanel>
                        <Border Width="48" Height="48" CornerRadius="12" Background="{DynamicResource BgIconGreenBrush}" 
                                HorizontalAlignment="Left" Margin="0,0,0,16">
                            <TextBlock Text="üí∞" FontSize="22" Foreground="#4CAF50"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="{Binding TotalRevenue, StringFormat={}{0:N0} ‚ÇΩ}" 
                                   FontSize="28" FontWeight="Bold" Foreground="#4CAF50"/>
                        <TextBlock Text="–í—ã—Ä—É—á–∫–∞" Style="{DynamicResource TextSmall}" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Revenue Chart Section -->
            <Grid Margin="0,0,0,16">
                <TextBlock Text="üìà –í–´–†–£–ß–ö–ê –ó–ê –ù–ï–î–ï–õ–Æ" Style="{DynamicResource TextLabel}"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="üìÑ –ù–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç" Style="{DynamicResource ButtonSecondary}" 
                            Command="{Binding GenerateWeeklyReportCommand}" Margin="0,0,8,0" Padding="12,6"/>
                    <Button Content="üìä –ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á—ë—Ç" Style="{DynamicResource ButtonSecondary}" 
                            Command="{Binding GenerateMonthlyReportCommand}" Padding="12,6"/>
                </StackPanel>
            </Grid>
            
            <Border Style="{DynamicResource Card}" Margin="0,0,0,24" Height="220">
                <lvc:CartesianChart 
                    Series="{Binding RevenueSeries}"
                    XAxes="{Binding RevenueXAxes}"
                    YAxes="{Binding RevenueYAxes}"
                    TooltipPosition="Top"
                    ZoomMode="None"/>
            </Border>

            <!-- Services Section -->
            <Grid Margin="0,0,0,16">
                <TextBlock Text="–ù–ê–®–ò –£–°–õ–£–ì–ò" Style="{DynamicResource TextLabel}"/>
                <TextBlock Text="{Binding FeaturedServices.Count, StringFormat={}{0} —É—Å–ª—É–≥}" 
                           Style="{DynamicResource TextSmall}" HorizontalAlignment="Right"/>
            </Grid>

            <ItemsControl ItemsSource="{Binding FeaturedServices}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="3"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{DynamicResource CardHoverable}" Margin="0,0,12,12">
                            <StackPanel>
                                <Border Width="56" Height="56" CornerRadius="14" Background="{DynamicResource BgIconBrush}" 
                                        HorizontalAlignment="Left" Margin="0,0,0,16">
                                    <TextBlock Text="{Binding Icon}" FontSize="26" Foreground="{DynamicResource TextPrimaryBrush}"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="{Binding Name}" FontSize="16" FontWeight="SemiBold" 
                                           Foreground="{DynamicResource TextPrimaryBrush}" TextWrapping="Wrap" Margin="0,0,0,8"/>
                                <TextBlock Text="{Binding Description}" Style="{DynamicResource TextSmall}"
                                           TextWrapping="Wrap" MaxHeight="54" Margin="0,0,0,16"
                                           TextTrimming="CharacterEllipsis"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="–æ—Ç " FontSize="14" Foreground="#606060"/>
                                    <TextBlock Text="{Binding PriceFrom, StringFormat={}{0:N0}}" 
                                               FontSize="22" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    <TextBlock Text=" ‚ÇΩ" FontSize="14" Foreground="#606060" 
                                               VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Service Statistics -->
            <Grid Margin="0,12,0,16" Visibility="{Binding ServiceStatistics.Count, Converter={StaticResource CountToVisibility}, FallbackValue=Collapsed}">
                <TextBlock Text="üìä –ü–û–ü–£–õ–Ø–†–ù–´–ï –£–°–õ–£–ì–ò" Style="{DynamicResource TextLabel}"/>
            </Grid>
            
            <Border Style="{DynamicResource Card}" Margin="0,0,0,24" 
                    Visibility="{Binding ServiceStatistics.Count, Converter={StaticResource CountToVisibility}, FallbackValue=Collapsed}">
                <ItemsControl ItemsSource="{Binding ServiceStatistics}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0" Text="{Binding Service.Icon}" FontSize="20" 
                                           Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="{Binding Service.Name}" FontSize="14" 
                                           Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                                <Border Grid.Column="2" Background="{DynamicResource BgHoverBrush}" 
                                        CornerRadius="6" Padding="10,4" Margin="8,0">
                                    <TextBlock FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}">
                                        <Run Text="{Binding OrderCount}"/>
                                        <Run Text="–∑–∞–∫–∞–∑–æ–≤"/>
                                    </TextBlock>
                                </Border>
                                <TextBlock Grid.Column="3" FontSize="14" FontWeight="SemiBold" 
                                           Foreground="#4CAF50" VerticalAlignment="Center">
                                    <Run Text="{Binding TotalRevenue, StringFormat={}{0:N0}}"/>
                                    <Run Text="‚ÇΩ"/>
                                </TextBlock>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Border>

            <!-- Contact Info -->
            <Border Style="{DynamicResource Card}" Margin="0,12,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="üìç –ê–î–†–ï–°" Style="{DynamicResource TextLabel}" Margin="0,0,0,10"/>
                        <TextBlock Text="–ù–µ—Ñ—Ç–µ—é–≥–∞–Ω—Å–∫–æ–µ —à–æ—Å—Å–µ, 22 —Å—Ç1" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="–°—É—Ä–≥—É—Ç, –•–ú–ê–û-–Æ–≥—Ä–∞" Style="{DynamicResource TextSmall}" Margin="0,4,0,0"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1">
                        <TextBlock Text="üïê –†–ï–ñ–ò–ú –†–ê–ë–û–¢–´" Style="{DynamicResource TextLabel}" Margin="0,0,0,10"/>
                        <TextBlock Text="–ï–∂–µ–¥–Ω–µ–≤–Ω–æ" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="09:00 - 21:00" Style="{DynamicResource TextSmall}" Margin="0,4,0,0"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2">
                        <TextBlock Text="üìû –ö–û–ù–¢–ê–ö–¢–´" Style="{DynamicResource TextLabel}" Margin="0,0,0,10"/>
                        <TextBlock Text="+7-929-293-52-22" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="–ò–≥–æ–Ω–∏–Ω –ü–∞–≤–µ–ª –í–∞—Å–∏–ª—å–µ–≤–∏—á" Style="{DynamicResource TextSmall}" Margin="0,4,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>
            
        </StackPanel>
    </ScrollViewer>
</UserControl>
